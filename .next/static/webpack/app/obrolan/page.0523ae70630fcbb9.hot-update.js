"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/obrolan/page",{

/***/ "(app-pages-browser)/./src/app/obrolan/page.tsx":
/*!**********************************!*\
  !*** ./src/app/obrolan/page.tsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ObrolanPage)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/firebase */ \"(app-pages-browser)/./src/firebase/index.ts\");\n/* harmony import */ var _lib_firestore_collections__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/firestore/collections */ \"(app-pages-browser)/./src/lib/firestore/collections.ts\");\n/* harmony import */ var _components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ui/avatar */ \"(app-pages-browser)/./src/components/ui/avatar.tsx\");\n/* harmony import */ var _components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ui/skeleton */ \"(app-pages-browser)/./src/components/ui/skeleton.tsx\");\n/* harmony import */ var _components_shared_error_state__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/shared/error-state */ \"(app-pages-browser)/./src/components/shared/error-state.tsx\");\n/* harmony import */ var _components_shared_empty_state__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/shared/empty-state */ \"(app-pages-browser)/./src/components/shared/empty-state.tsx\");\n/* harmony import */ var _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=CornerUpLeft,MessageSquare,Search,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/corner-up-left.js\");\n/* harmony import */ var _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=CornerUpLeft,MessageSquare,Search,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/message-square.js\");\n/* harmony import */ var _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! __barrel_optimize__?names=CornerUpLeft,MessageSquare,Search,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/send.js\");\n/* harmony import */ var _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! __barrel_optimize__?names=CornerUpLeft,MessageSquare,Search,Send!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/ui/scroll-area */ \"(app-pages-browser)/./src/components/ui/scroll-area.tsx\");\n/* harmony import */ var _hooks_use_user_profile__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/hooks/use-user-profile */ \"(app-pages-browser)/./src/hooks/use-user-profile.ts\");\n/* harmony import */ var _components_ui_card__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/ui/card */ \"(app-pages-browser)/./src/components/ui/card.tsx\");\n/* harmony import */ var _components_ui_textarea__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/ui/textarea */ \"(app-pages-browser)/./src/components/ui/textarea.tsx\");\n/* harmony import */ var _components_ui_button__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/components/ui/button */ \"(app-pages-browser)/./src/components/ui/button.tsx\");\n/* harmony import */ var _components_ui_input__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/components/ui/input */ \"(app-pages-browser)/./src/components/ui/input.tsx\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! __barrel_optimize__?names=format,isToday,isYesterday!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/isToday.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=format,isToday,isYesterday!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/format.mjs\");\n/* harmony import */ var _barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=format,isToday,isYesterday!=!date-fns */ \"(app-pages-browser)/./node_modules/date-fns/isYesterday.mjs\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./src/lib/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getInitials(name, phone) {\n    const targetName = name && name.trim() ? name : phone;\n    if (!targetName) return \"??\";\n    const parts = targetName.split(' ').filter(Boolean);\n    if (parts.length > 1) {\n        return (parts[0][0] + (parts.pop() || '')[0]).toUpperCase();\n    }\n    if (parts.length === 1 && parts[0]) {\n        return parts[0].substring(0, 2).toUpperCase();\n    }\n    return \"??\";\n}\nfunction formatChatTimestamp(ts) {\n    if (!ts) return '';\n    const date = ts.toDate();\n    if ((0,_barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_17__.isToday)(date)) {\n        return (0,_barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_18__.format)(date, 'HH:mm');\n    }\n    if ((0,_barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_19__.isYesterday)(date)) {\n        return 'Yesterday';\n    }\n    return (0,_barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_18__.format)(date, 'dd/MM/yyyy');\n}\nfunction ChatListItem(param) {\n    let { lead, isSelected, onSelect } = param;\n    const displayName = (lead.customerName || lead.phone || \"Unknown\").trim();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_16__.cn)('flex items-start gap-3 p-2.5 rounded-lg cursor-pointer transition-colors', isSelected ? 'bg-muted' : 'hover:bg-muted/50'),\n        onClick: onSelect,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.Avatar, {\n                className: \"h-12 w-12 border\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.AvatarImage, {\n                        src: \"https://i.pravatar.cc/150?u=\".concat(lead.chatId)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 72,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.AvatarFallback, {\n                        children: getInitials(displayName, lead.phone)\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 73,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 71,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-hidden border-b pb-2.5\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-between items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-semibold truncate text-sm\",\n                                children: displayName\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 77,\n                                columnNumber: 11\n                            }, this),\n                            lead.lastMessageAt && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-muted-foreground whitespace-nowrap\",\n                                children: formatChatTimestamp(lead.lastMessageAt)\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 79,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 76,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-muted-foreground truncate mt-1\",\n                        children: lead.lastMessagePreview || 'Click to view messages...'\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 84,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 75,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n        lineNumber: 64,\n        columnNumber: 5\n    }, this);\n}\n_c = ChatListItem;\nfunction MessageBubble(param) {\n    let { message } = param;\n    const isOutbound = message.direction === 'out';\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_16__.cn)('flex items-end gap-2 w-full', isOutbound ? 'justify-end' : 'justify-start'),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_16__.cn)('max-w-md p-2.5 rounded-lg shadow-sm', isOutbound ? 'bg-green-100 dark:bg-green-900/50' : 'bg-background'),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"whitespace-pre-wrap text-sm\",\n                    children: message.text\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 103,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-xs opacity-60 mt-1.5 text-right\",\n                    children: message.timestamp && (0,_barrel_optimize_names_format_isToday_isYesterday_date_fns__WEBPACK_IMPORTED_MODULE_18__.format)(message.timestamp.toDate(), 'HH:mm')\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 104,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n            lineNumber: 97,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n        lineNumber: 96,\n        columnNumber: 5\n    }, this);\n}\n_c1 = MessageBubble;\nfunction ChatWindow(param) {\n    let { lead } = param;\n    _s();\n    const firestore = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useFirestore)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_15__.useToast)();\n    const { user: authUser } = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useUser)();\n    const [message, setMessage] = react__WEBPACK_IMPORTED_MODULE_1__.useState('');\n    const [isSending, setIsSending] = react__WEBPACK_IMPORTED_MODULE_1__.useState(false);\n    const messagesEndRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n    const messagesQuery = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useMemoFirebase)({\n        \"ChatWindow.useMemoFirebase[messagesQuery]\": ()=>{\n            if (!firestore || !lead) return null;\n            return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(firestore, _lib_firestore_collections__WEBPACK_IMPORTED_MODULE_4__.FIRESTORE_COLLECTIONS.leads, lead.id, 'messages'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)('timestamp', 'asc'), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(50));\n        }\n    }[\"ChatWindow.useMemoFirebase[messagesQuery]\"], [\n        firestore,\n        lead\n    ]);\n    const { data: messages, isLoading, error } = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useCollection)(messagesQuery);\n    const scrollToBottom = ()=>{\n        var _messagesEndRef_current;\n        (_messagesEndRef_current = messagesEndRef.current) === null || _messagesEndRef_current === void 0 ? void 0 : _messagesEndRef_current.scrollIntoView({\n            behavior: 'smooth'\n        });\n    };\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect({\n        \"ChatWindow.useEffect\": ()=>{\n            if (messages && messages.length > 0) {\n                scrollToBottom();\n            }\n        }\n    }[\"ChatWindow.useEffect\"], [\n        messages\n    ]);\n    const handleSendMessage = async (e)=>{\n        e.preventDefault();\n        if (!message.trim() || !lead || !authUser) return;\n        setIsSending(true);\n        try {\n            const token = await authUser.getIdToken();\n            const response = await fetch('/api/wa/send', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': \"Bearer \".concat(token)\n                },\n                body: JSON.stringify({\n                    message,\n                    leadId: lead.id\n                })\n            });\n            const result = await response.json();\n            if (!response.ok) throw new Error(result.error || 'Failed to send message.');\n            setMessage('');\n        } catch (error) {\n            toast({\n                variant: 'destructive',\n                title: 'Error',\n                description: error.message\n            });\n        } finally{\n            setIsSending(false);\n        }\n    };\n    const displayName = (lead === null || lead === void 0 ? void 0 : lead.customerName) || (lead === null || lead === void 0 ? void 0 : lead.phone) || \"Unknown\";\n    if (!lead) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full hidden md:flex flex-col items-center justify-center bg-muted/50 rounded-lg\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-16 w-16 text-muted-foreground/50\"\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 168,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg text-muted-foreground\",\n                    children: \"Select a conversation to start\"\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 169,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n            lineNumber: 167,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_11__.Card, {\n        className: \"h-full flex flex-col border-0 md:border\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_11__.CardHeader, {\n                className: \"flex flex-row items-center gap-4 border-b p-3\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.Avatar, {\n                        className: \"h-10 w-10 border\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.AvatarImage, {\n                                src: \"https://i.pravatar.cc/150?u=\".concat(lead.chatId)\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 178,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_avatar__WEBPACK_IMPORTED_MODULE_5__.AvatarFallback, {\n                                children: getInitials(lead.customerName, lead.phone)\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 179,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 177,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-semibold\",\n                                children: displayName\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 182,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-sm text-muted-foreground\",\n                                children: lead.phone\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 183,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 181,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 176,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_11__.CardContent, {\n                className: \"flex-1 p-0 bg-muted/20\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_9__.ScrollArea, {\n                    className: \"h-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-4 space-y-4\",\n                        children: [\n                            isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__.Skeleton, {\n                                className: \"h-16 w-1/2\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 189,\n                                columnNumber: 27\n                            }, this),\n                            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_error_state__WEBPACK_IMPORTED_MODULE_7__.ErrorState, {\n                                onRetry: ()=>{},\n                                message: \"Failed to load messages.\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 190,\n                                columnNumber: 23\n                            }, this),\n                            messages && messages.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_empty_state__WEBPACK_IMPORTED_MODULE_8__.EmptyState, {\n                                icon: _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n                                title: \"No Messages Yet\",\n                                description: \"Start the conversation by sending the first message.\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 192,\n                                columnNumber: 17\n                            }, this),\n                            messages === null || messages === void 0 ? void 0 : messages.map((msg)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MessageBubble, {\n                                    message: msg\n                                }, msg.id, false, {\n                                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                    lineNumber: 195,\n                                    columnNumber: 15\n                                }, this)),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                ref: messagesEndRef\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 197,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 188,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 187,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 186,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_card__WEBPACK_IMPORTED_MODULE_11__.CardFooter, {\n                className: \"p-2 border-t bg-background\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                    onSubmit: handleSendMessage,\n                    className: \"flex w-full items-center gap-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_textarea__WEBPACK_IMPORTED_MODULE_12__.Textarea, {\n                            value: message,\n                            onChange: (e)=>setMessage(e.target.value),\n                            placeholder: \"Type your message...\",\n                            className: \"flex-1 resize-none border-0 focus-visible:ring-0 focus-visible:ring-offset-0\",\n                            rows: 1,\n                            disabled: isSending,\n                            onKeyDown: (e)=>{\n                                if (e.key === 'Enter' && !e.shiftKey) {\n                                    e.preventDefault();\n                                    handleSendMessage(e);\n                                }\n                            }\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                            lineNumber: 203,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_button__WEBPACK_IMPORTED_MODULE_13__.Button, {\n                            type: \"submit\",\n                            size: \"icon\",\n                            disabled: isSending || !message.trim(),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n                                className: \"h-4 w-4\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 218,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                            lineNumber: 217,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 202,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 201,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n        lineNumber: 175,\n        columnNumber: 5\n    }, this);\n}\n_s(ChatWindow, \"1mLXPceYr6yMtFZfBKBknQw8BLo=\", false, function() {\n    return [\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useFirestore,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_15__.useToast,\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useUser,\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useMemoFirebase,\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useCollection\n    ];\n});\n_c2 = ChatWindow;\nfunction PageSkeleton() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-0 h-full\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"col-span-1 border-r p-2\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-2\",\n                    children: [\n                        ...Array(9)\n                    ].map((_, i)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center space-x-4 p-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__.Skeleton, {\n                                    className: \"h-12 w-12 rounded-full\"\n                                }, void 0, false, {\n                                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                    lineNumber: 233,\n                                    columnNumber: 21\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"space-y-2 flex-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__.Skeleton, {\n                                            className: \"h-4 w-1/2\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                            lineNumber: 235,\n                                            columnNumber: 25\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__.Skeleton, {\n                                            className: \"h-4 w-3/4\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                            lineNumber: 236,\n                                            columnNumber: 25\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                    lineNumber: 234,\n                                    columnNumber: 21\n                                }, this)\n                            ]\n                        }, i, true, {\n                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                            lineNumber: 232,\n                            columnNumber: 21\n                        }, this))\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 230,\n                    columnNumber: 13\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 229,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"col-span-1 md:col-span-2 lg:col-span-3 hidden md:block p-2\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_skeleton__WEBPACK_IMPORTED_MODULE_6__.Skeleton, {\n                    className: \"h-full w-full rounded-lg\"\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 243,\n                    columnNumber: 14\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 242,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n        lineNumber: 228,\n        columnNumber: 5\n    }, this);\n}\n_c3 = PageSkeleton;\nfunction ObrolanPage() {\n    _s1();\n    const firestore = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useFirestore)();\n    const { userProfile, isLoading: isProfileLoading, error: profileError } = (0,_hooks_use_user_profile__WEBPACK_IMPORTED_MODULE_10__.useUserProfile)();\n    const [selectedLead, setSelectedLead] = react__WEBPACK_IMPORTED_MODULE_1__.useState(null);\n    const [searchQuery, setSearchQuery] = react__WEBPACK_IMPORTED_MODULE_1__.useState(\"\");\n    const whatsappLeadsQuery = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useMemoFirebase)({\n        \"ObrolanPage.useMemoFirebase[whatsappLeadsQuery]\": ()=>{\n            if (!firestore || !userProfile) return null;\n            const coll = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(firestore, _lib_firestore_collections__WEBPACK_IMPORTED_MODULE_4__.FIRESTORE_COLLECTIONS.leads);\n            // REMOVED: orderBy('lastMessageAt', 'desc')\n            const baseFilters = [\n                (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)('source', '==', 'whatsapp')\n            ];\n            if (userProfile.role === 'SUPER_ADMIN') {\n                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(coll, ...baseFilters);\n            }\n            if (userProfile.role === 'HEAD_SALES' && userProfile.teamId) {\n                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(coll, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)('teamId', '==', userProfile.teamId), ...baseFilters);\n            }\n            if (userProfile.role === 'SALES') {\n                return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(coll, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)('ownerUid', '==', userProfile.id), ...baseFilters);\n            }\n            return (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(coll, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)('ownerUid', '==', 'user-has-no-permission'));\n        }\n    }[\"ObrolanPage.useMemoFirebase[whatsappLeadsQuery]\"], [\n        firestore,\n        userProfile\n    ]);\n    const { data: leads, isLoading: isLoadingLeads, error: leadsError } = (0,_firebase__WEBPACK_IMPORTED_MODULE_3__.useCollection)(whatsappLeadsQuery);\n    const isLoading = isProfileLoading || isLoadingLeads;\n    const error = profileError || leadsError;\n    const handleRetry = ()=>window.location.reload();\n    const filteredLeads = react__WEBPACK_IMPORTED_MODULE_1__.useMemo({\n        \"ObrolanPage.useMemo[filteredLeads]\": ()=>{\n            if (!leads) return [];\n            // Client-side sorting\n            const sortedLeads = [\n                ...leads\n            ].sort({\n                \"ObrolanPage.useMemo[filteredLeads].sortedLeads\": (a, b)=>{\n                    var _a_lastMessageAt, _a_createdAt, _b_lastMessageAt, _b_createdAt;\n                    const timeA = ((_a_lastMessageAt = a.lastMessageAt) === null || _a_lastMessageAt === void 0 ? void 0 : _a_lastMessageAt.toMillis()) || ((_a_createdAt = a.createdAt) === null || _a_createdAt === void 0 ? void 0 : _a_createdAt.toMillis()) || 0;\n                    const timeB = ((_b_lastMessageAt = b.lastMessageAt) === null || _b_lastMessageAt === void 0 ? void 0 : _b_lastMessageAt.toMillis()) || ((_b_createdAt = b.createdAt) === null || _b_createdAt === void 0 ? void 0 : _b_createdAt.toMillis()) || 0;\n                    return timeB - timeA;\n                }\n            }[\"ObrolanPage.useMemo[filteredLeads].sortedLeads\"]);\n            if (!searchQuery) return sortedLeads;\n            return sortedLeads.filter({\n                \"ObrolanPage.useMemo[filteredLeads]\": (lead)=>lead.customerName && lead.customerName.toLowerCase().includes(searchQuery.toLowerCase()) || lead.phone && lead.phone.includes(searchQuery)\n            }[\"ObrolanPage.useMemo[filteredLeads]\"]);\n        }\n    }[\"ObrolanPage.useMemo[filteredLeads]\"], [\n        leads,\n        searchQuery\n    ]);\n    react__WEBPACK_IMPORTED_MODULE_1__.useEffect({\n        \"ObrolanPage.useEffect\": ()=>{\n            // Automatically select the first lead when the list is loaded or filtered\n            if (filteredLeads.length > 0 && !selectedLead) {\n                setSelectedLead(filteredLeads[0]);\n            } else if (filteredLeads.length > 0 && selectedLead) {\n                // If a lead is already selected, check if it still exists in the filtered list.\n                // If not, select the new first lead. This handles cases where a search query\n                // removes the currently selected lead from view.\n                const selectedExists = filteredLeads.some({\n                    \"ObrolanPage.useEffect.selectedExists\": (lead)=>lead.id === selectedLead.id\n                }[\"ObrolanPage.useEffect.selectedExists\"]);\n                if (!selectedExists) {\n                    setSelectedLead(filteredLeads[0]);\n                }\n            } else if (filteredLeads.length === 0) {\n                // If there are no leads, clear the selection\n                setSelectedLead(null);\n            }\n        }\n    }[\"ObrolanPage.useEffect\"], [\n        filteredLeads,\n        selectedLead\n    ]);\n    const renderContent = ()=>{\n        if (isLoading) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PageSkeleton, {}, void 0, false, {\n            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n            lineNumber: 319,\n            columnNumber: 27\n        }, this);\n        if (error) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_error_state__WEBPACK_IMPORTED_MODULE_7__.ErrorState, {\n            onRetry: handleRetry,\n            message: \"Failed to load chat list.\"\n        }, void 0, false, {\n            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n            lineNumber: 320,\n            columnNumber: 23\n        }, this);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 h-full border rounded-lg overflow-hidden\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_16__.cn)(\"col-span-1 border-r flex-col\", selectedLead ? \"hidden md:flex\" : \"flex\"),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-2 border-b\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n                                        className: \"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                        lineNumber: 329,\n                                        columnNumber: 25\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_input__WEBPACK_IMPORTED_MODULE_14__.Input, {\n                                        placeholder: \"Search chats...\",\n                                        className: \"pl-8\",\n                                        value: searchQuery,\n                                        onChange: (e)=>setSearchQuery(e.target.value)\n                                    }, void 0, false, {\n                                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                        lineNumber: 330,\n                                        columnNumber: 25\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 328,\n                                columnNumber: 21\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                            lineNumber: 327,\n                            columnNumber: 18\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_scroll_area__WEBPACK_IMPORTED_MODULE_9__.ScrollArea, {\n                            className: \"flex-1\",\n                            children: filteredLeads.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_shared_empty_state__WEBPACK_IMPORTED_MODULE_8__.EmptyState, {\n                                icon: _barrel_optimize_names_CornerUpLeft_MessageSquare_Search_Send_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n                                title: \"No WhatsApp Chats\",\n                                description: \"Leads from WhatsApp will appear here.\",\n                                className: \"border-0 shadow-none\"\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 340,\n                                columnNumber: 26\n                            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-2 space-y-1\",\n                                children: filteredLeads.map((lead)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatListItem, {\n                                        lead: lead,\n                                        isSelected: (selectedLead === null || selectedLead === void 0 ? void 0 : selectedLead.id) === lead.id,\n                                        onSelect: ()=>setSelectedLead(lead)\n                                    }, lead.id, false, {\n                                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                        lineNumber: 344,\n                                        columnNumber: 33\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                                lineNumber: 342,\n                                columnNumber: 25\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                            lineNumber: 338,\n                            columnNumber: 18\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 323,\n                    columnNumber: 13\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_16__.cn)(\"md:col-span-2 lg:col-span-3 flex-col\", selectedLead ? \"flex\" : \"hidden md:flex\"),\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ChatWindow, {\n                        lead: selectedLead\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 359,\n                        columnNumber: 16\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                    lineNumber: 355,\n                    columnNumber: 13\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n            lineNumber: 322,\n            columnNumber: 9\n        }, this);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-[calc(100vh-57px)] flex flex-col p-4 sm:p-6 lg:p-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"pb-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        className: \"text-3xl font-bold tracking-tight font-headline\",\n                        children: \"Chat\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 368,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-muted-foreground mt-2 font-serif\",\n                        children: \"Manage your WhatsApp conversations with leads.\"\n                    }, void 0, false, {\n                        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                        lineNumber: 369,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 367,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-hidden\",\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n                lineNumber: 373,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/user/studio/src/app/obrolan/page.tsx\",\n        lineNumber: 366,\n        columnNumber: 5\n    }, this);\n}\n_s1(ObrolanPage, \"cmnZU6ZWSDFOp3IixJQ6/y8v2cg=\", false, function() {\n    return [\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useFirestore,\n        _hooks_use_user_profile__WEBPACK_IMPORTED_MODULE_10__.useUserProfile,\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useMemoFirebase,\n        _firebase__WEBPACK_IMPORTED_MODULE_3__.useCollection\n    ];\n});\n_c4 = ObrolanPage;\nvar _c, _c1, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ChatListItem\");\n$RefreshReg$(_c1, \"MessageBubble\");\n$RefreshReg$(_c2, \"ChatWindow\");\n$RefreshReg$(_c3, \"PageSkeleton\");\n$RefreshReg$(_c4, \"ObrolanPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvb2Jyb2xhbi9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRStCO0FBQzBEO0FBQ2Y7QUFDTjtBQUVTO0FBQ3pCO0FBQ1M7QUFDQTtBQUNZO0FBQ2hCO0FBQ0M7QUFDdUI7QUFDN0I7QUFDSjtBQUNGO0FBQ0Q7QUFDVztBQUN2QjtBQUNJO0FBR3JDLFNBQVNtQyxZQUFZQyxJQUFhLEVBQUVDLEtBQWM7SUFDOUMsTUFBTUMsYUFBYUYsUUFBUUEsS0FBS0csSUFBSSxLQUFLSCxPQUFPQztJQUNoRCxJQUFJLENBQUNDLFlBQVksT0FBTztJQUV4QixNQUFNRSxRQUFRRixXQUFXRyxLQUFLLENBQUMsS0FBS0MsTUFBTSxDQUFDQztJQUMzQyxJQUFJSCxNQUFNSSxNQUFNLEdBQUcsR0FBRztRQUNsQixPQUFPLENBQUNKLEtBQUssQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUNBLE1BQU1LLEdBQUcsTUFBTSxFQUFDLENBQUUsQ0FBQyxFQUFFLEVBQUVDLFdBQVc7SUFDN0Q7SUFDQSxJQUFJTixNQUFNSSxNQUFNLEtBQUssS0FBS0osS0FBSyxDQUFDLEVBQUUsRUFBRTtRQUNoQyxPQUFPQSxLQUFLLENBQUMsRUFBRSxDQUFDTyxTQUFTLENBQUMsR0FBRyxHQUFHRCxXQUFXO0lBQy9DO0lBQ0EsT0FBTztBQUNYO0FBRUEsU0FBU0Usb0JBQW9CQyxFQUFjO0lBQ3ZDLElBQUksQ0FBQ0EsSUFBSSxPQUFPO0lBQ2hCLE1BQU1DLE9BQU9ELEdBQUdFLE1BQU07SUFDdEIsSUFBSXBCLG9HQUFPQSxDQUFDbUIsT0FBTztRQUNmLE9BQU9wQixtR0FBTUEsQ0FBQ29CLE1BQU07SUFDeEI7SUFDQSxJQUFJbEIsd0dBQVdBLENBQUNrQixPQUFPO1FBQ25CLE9BQU87SUFDWDtJQUNBLE9BQU9wQixtR0FBTUEsQ0FBQ29CLE1BQU07QUFDeEI7QUFHQSxTQUFTRSxhQUFhLEtBUXJC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T0FBTTtnQ0FBb0JDLGFBQVk7Z0NBQXdDdkQsV0FBVTs7Ozs7cURBRTFILDhEQUFDRDtnQ0FBSUMsV0FBVTswQ0FDVmlHLGNBQWN2QyxHQUFHLENBQUMsQ0FBQ2hFLHFCQUNoQiw4REFBQ0Q7d0NBRUdDLE1BQU1BO3dDQUNOQyxZQUFZdUYsQ0FBQUEseUJBQUFBLG1DQUFBQSxhQUFjeEQsRUFBRSxNQUFLaEMsS0FBS2dDLEVBQUU7d0NBQ3hDOUIsVUFBVSxJQUFNdUYsZ0JBQWdCekY7dUNBSDNCQSxLQUFLZ0MsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzhCQVVwQyw4REFBQzNCO29CQUFJQyxXQUFXMUIsK0NBQUVBLENBQ2hCLHdDQUNBNEcsZUFBZSxTQUFTOzhCQUV2Qiw0RUFBQ3JFO3dCQUFXbkIsTUFBTXdGOzs7Ozs7Ozs7Ozs7Ozs7OztJQUkvQjtJQUVBLHFCQUNFLDhEQUFDbkY7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ2dIO3dCQUFHaEgsV0FBVTtrQ0FBa0Q7Ozs7OztrQ0FDaEUsOERBQUNLO3dCQUFFTCxXQUFVO2tDQUF3Qzs7Ozs7Ozs7Ozs7OzBCQUl2RCw4REFBQ0Q7Z0JBQUlDLFdBQVU7MEJBQ1orRzs7Ozs7Ozs7Ozs7O0FBSVQ7SUFqSXdCakM7O1FBQ0puSSxtREFBWUE7UUFDNENlLG9FQUFjQTtRQUk3RGIsc0RBQWVBO1FBbUI0QkQsb0RBQWFBOzs7TUF6QjdEa0kiLCJzb3VyY2VzIjpbIi9ob21lL3VzZXIvc3R1ZGlvL3NyYy9hcHAvb2Jyb2xhbi9wYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGNvbGxlY3Rpb24sIHF1ZXJ5LCB3aGVyZSwgb3JkZXJCeSwgbGltaXQsIFRpbWVzdGFtcCB9IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyB1c2VGaXJlc3RvcmUsIHVzZUNvbGxlY3Rpb24sIHVzZU1lbW9GaXJlYmFzZSB9IGZyb20gJ0AvZmlyZWJhc2UnO1xuaW1wb3J0IHsgRklSRVNUT1JFX0NPTExFQ1RJT05TIH0gZnJvbSAnQC9saWIvZmlyZXN0b3JlL2NvbGxlY3Rpb25zJztcbmltcG9ydCB0eXBlIHsgTGVhZCwgTWVzc2FnZSB9IGZyb20gJ0AvbGliL2ZpcmVzdG9yZS90eXBlcyc7XG5pbXBvcnQgeyBBdmF0YXIsIEF2YXRhckZhbGxiYWNrLCBBdmF0YXJJbWFnZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9hdmF0YXInO1xuaW1wb3J0IHsgU2tlbGV0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvc2tlbGV0b24nO1xuaW1wb3J0IHsgRXJyb3JTdGF0ZSB9IGZyb20gJ0AvY29tcG9uZW50cy9zaGFyZWQvZXJyb3Itc3RhdGUnO1xuaW1wb3J0IHsgRW1wdHlTdGF0ZSB9IGZyb20gJ0AvY29tcG9uZW50cy9zaGFyZWQvZW1wdHktc3RhdGUnO1xuaW1wb3J0IHsgTWVzc2FnZVNxdWFyZSwgU2VuZCwgQ29ybmVyVXBMZWZ0LCBTZWFyY2ggfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgU2Nyb2xsQXJlYSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9zY3JvbGwtYXJlYSc7XG5pbXBvcnQgeyB1c2VVc2VyUHJvZmlsZSB9IGZyb20gJ0AvaG9va3MvdXNlLXVzZXItcHJvZmlsZSc7XG5pbXBvcnQgeyBDYXJkLCBDYXJkSGVhZGVyLCBDYXJkQ29udGVudCwgQ2FyZEZvb3RlciB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IFRleHRhcmVhIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL3RleHRhcmVhJztcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvaW5wdXQnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICdAL2hvb2tzL3VzZS10b2FzdCc7XG5pbXBvcnQgeyBmb3JtYXQsIGlzVG9kYXksIGlzWWVzdGVyZGF5IH0gZnJvbSAnZGF0ZS1mbnMnO1xuaW1wb3J0IHsgY24gfSBmcm9tICdAL2xpYi91dGlscyc7XG5pbXBvcnQgeyB1c2VVc2VyIH0gZnJvbSAnQC9maXJlYmFzZSc7XG5cblxuZnVuY3Rpb24gZ2V0SW5pdGlhbHMobmFtZT86IHN0cmluZywgcGhvbmU/OiBzdHJpbmcpIHtcbiAgICBjb25zdCB0YXJnZXROYW1lID0gbmFtZSAmJiBuYW1lLnRyaW0oKSA/IG5hbWUgOiBwaG9uZTtcbiAgICBpZiAoIXRhcmdldE5hbWUpIHJldHVybiBcIj8/XCI7XG4gICAgXG4gICAgY29uc3QgcGFydHMgPSB0YXJnZXROYW1lLnNwbGl0KCcgJykuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHJldHVybiAocGFydHNbMF1bMF0gKyAocGFydHMucG9wKCkgfHwgJycpWzBdKS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAxICYmIHBhcnRzWzBdKSB7XG4gICAgICAgIHJldHVybiBwYXJ0c1swXS5zdWJzdHJpbmcoMCwgMikudG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIFwiPz9cIjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0Q2hhdFRpbWVzdGFtcCh0cz86IFRpbWVzdGFtcCkge1xuICAgIGlmICghdHMpIHJldHVybiAnJztcbiAgICBjb25zdCBkYXRlID0gdHMudG9EYXRlKCk7XG4gICAgaWYgKGlzVG9kYXkoZGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdChkYXRlLCAnSEg6bW0nKTtcbiAgICB9XG4gICAgaWYgKGlzWWVzdGVyZGF5KGRhdGUpKSB7XG4gICAgICAgIHJldHVybiAnWWVzdGVyZGF5JztcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdChkYXRlLCAnZGQvTU0veXl5eScpO1xufVxuXG5cbmZ1bmN0aW9uIENoYXRMaXN0SXRlbSh7XG4gIGxlYWQsXG4gIGlzU2VsZWN0ZWQsXG4gIG9uU2VsZWN0LFxufToge1xuICBsZWFkOiBMZWFkO1xuICBpc1NlbGVjdGVkOiBib29sZWFuO1xuICBvblNlbGVjdDogKCkgPT4gdm9pZDtcbn0pIHtcbiAgY29uc3QgZGlzcGxheU5hbWUgPSAobGVhZC5jdXN0b21lck5hbWUgfHwgbGVhZC5waG9uZSB8fCBcIlVua25vd25cIikudHJpbSgpO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICBjbGFzc05hbWU9e2NuKFxuICAgICAgICAnZmxleCBpdGVtcy1zdGFydCBnYXAtMyBwLTIuNSByb3VuZGVkLWxnIGN1cnNvci1wb2ludGVyIHRyYW5zaXRpb24tY29sb3JzJyxcbiAgICAgICAgaXNTZWxlY3RlZCA/ICdiZy1tdXRlZCcgOiAnaG92ZXI6YmctbXV0ZWQvNTAnXG4gICAgICApfVxuICAgICAgb25DbGljaz17b25TZWxlY3R9XG4gICAgPlxuICAgICAgPEF2YXRhciBjbGFzc05hbWU9XCJoLTEyIHctMTIgYm9yZGVyXCI+XG4gICAgICAgIDxBdmF0YXJJbWFnZSBzcmM9e2BodHRwczovL2kucHJhdmF0YXIuY2MvMTUwP3U9JHtsZWFkLmNoYXRJZH1gfSAvPlxuICAgICAgICA8QXZhdGFyRmFsbGJhY2s+e2dldEluaXRpYWxzKGRpc3BsYXlOYW1lLCBsZWFkLnBob25lKX08L0F2YXRhckZhbGxiYWNrPlxuICAgICAgPC9BdmF0YXI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLWIgcGItMi41XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRydW5jYXRlIHRleHQtc21cIj57ZGlzcGxheU5hbWV9PC9kaXY+XG4gICAgICAgICAge2xlYWQubGFzdE1lc3NhZ2VBdCAmJiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHdoaXRlc3BhY2Utbm93cmFwXCI+XG4gICAgICAgICAgICAgIHtmb3JtYXRDaGF0VGltZXN0YW1wKGxlYWQubGFzdE1lc3NhZ2VBdCl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQgdHJ1bmNhdGUgbXQtMVwiPlxuICAgICAgICAgIHtsZWFkLmxhc3RNZXNzYWdlUHJldmlldyB8fCAnQ2xpY2sgdG8gdmlldyBtZXNzYWdlcy4uLid9XG4gICAgICAgIDwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5mdW5jdGlvbiBNZXNzYWdlQnViYmxlKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U6IE1lc3NhZ2UgfSkge1xuICBjb25zdCBpc091dGJvdW5kID0gbWVzc2FnZS5kaXJlY3Rpb24gPT09ICdvdXQnO1xuICBcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y24oJ2ZsZXggaXRlbXMtZW5kIGdhcC0yIHctZnVsbCcsIGlzT3V0Ym91bmQgPyAnanVzdGlmeS1lbmQnIDogJ2p1c3RpZnktc3RhcnQnKX0+XG4gICAgICA8ZGl2XG4gICAgICAgIGNsYXNzTmFtZT17Y24oXG4gICAgICAgICAgJ21heC13LW1kIHAtMi41IHJvdW5kZWQtbGcgc2hhZG93LXNtJyxcbiAgICAgICAgICBpc091dGJvdW5kID8gJ2JnLWdyZWVuLTEwMCBkYXJrOmJnLWdyZWVuLTkwMC81MCcgOiAnYmctYmFja2dyb3VuZCdcbiAgICAgICAgKX1cbiAgICAgID5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwid2hpdGVzcGFjZS1wcmUtd3JhcCB0ZXh0LXNtXCI+e21lc3NhZ2UudGV4dH08L3A+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyBvcGFjaXR5LTYwIG10LTEuNSB0ZXh0LXJpZ2h0XCI+XG4gICAgICAgICAge21lc3NhZ2UudGltZXN0YW1wICYmIGZvcm1hdChtZXNzYWdlLnRpbWVzdGFtcC50b0RhdGUoKSwgJ0hIOm1tJyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmZ1bmN0aW9uIENoYXRXaW5kb3coeyBsZWFkIH06IHsgbGVhZDogTGVhZCB8IG51bGwgfSkge1xuICBjb25zdCBmaXJlc3RvcmUgPSB1c2VGaXJlc3RvcmUoKTtcbiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgeyB1c2VyOiBhdXRoVXNlciB9ID0gdXNlVXNlcigpO1xuICBjb25zdCBbbWVzc2FnZSwgc2V0TWVzc2FnZV0gPSBSZWFjdC51c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtpc1NlbmRpbmcsIHNldElzU2VuZGluZ10gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gUmVhY3QudXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcblxuICBjb25zdCBtZXNzYWdlc1F1ZXJ5ID0gdXNlTWVtb0ZpcmViYXNlKCgpID0+IHtcbiAgICBpZiAoIWZpcmVzdG9yZSB8fCAhbGVhZCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihmaXJlc3RvcmUsIEZJUkVTVE9SRV9DT0xMRUNUSU9OUy5sZWFkcywgbGVhZC5pZCwgJ21lc3NhZ2VzJyksXG4gICAgICBvcmRlckJ5KCd0aW1lc3RhbXAnLCAnYXNjJyksXG4gICAgICBsaW1pdCg1MClcbiAgICApO1xuICB9LCBbZmlyZXN0b3JlLCBsZWFkXSk7XG5cbiAgY29uc3QgeyBkYXRhOiBtZXNzYWdlcywgaXNMb2FkaW5nLCBlcnJvciB9ID0gdXNlQ29sbGVjdGlvbjxNZXNzYWdlPihtZXNzYWdlc1F1ZXJ5KTtcblxuICBjb25zdCBzY3JvbGxUb0JvdHRvbSA9ICgpID0+IHtcbiAgICBtZXNzYWdlc0VuZFJlZi5jdXJyZW50Py5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJyB9KTtcbiAgfTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChtZXNzYWdlcyAmJiBtZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNjcm9sbFRvQm90dG9tKCk7XG4gICAgfVxuICB9LCBbbWVzc2FnZXNdKTtcblxuICBjb25zdCBoYW5kbGVTZW5kTWVzc2FnZSA9IGFzeW5jIChlOiBSZWFjdC5Gb3JtRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCFtZXNzYWdlLnRyaW0oKSB8fCAhbGVhZCB8fCAhYXV0aFVzZXIpIHJldHVybjtcblxuICAgIHNldElzU2VuZGluZyh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGF1dGhVc2VyLmdldElkVG9rZW4oKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS93YS9zZW5kJywge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlLCBsZWFkSWQ6IGxlYWQuaWQgfSksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UuJyk7XG4gICAgICAgIHNldE1lc3NhZ2UoJycpO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdG9hc3QoeyB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLCB0aXRsZTogJ0Vycm9yJywgZGVzY3JpcHRpb246IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNTZW5kaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBkaXNwbGF5TmFtZSA9IGxlYWQ/LmN1c3RvbWVyTmFtZSB8fCBsZWFkPy5waG9uZSB8fCBcIlVua25vd25cIjtcblxuICBpZiAoIWxlYWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgaGlkZGVuIG1kOmZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLW11dGVkLzUwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgPENvcm5lclVwTGVmdCBjbGFzc05hbWU9XCJoLTE2IHctMTYgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kLzUwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiPlNlbGVjdCBhIGNvbnZlcnNhdGlvbiB0byBzdGFydDwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxDYXJkIGNsYXNzTmFtZT1cImgtZnVsbCBmbGV4IGZsZXgtY29sIGJvcmRlci0wIG1kOmJvcmRlclwiPlxuICAgICAgPENhcmRIZWFkZXIgY2xhc3NOYW1lPVwiZmxleCBmbGV4LXJvdyBpdGVtcy1jZW50ZXIgZ2FwLTQgYm9yZGVyLWIgcC0zXCI+XG4gICAgICAgIDxBdmF0YXIgY2xhc3NOYW1lPVwiaC0xMCB3LTEwIGJvcmRlclwiPlxuICAgICAgICAgIDxBdmF0YXJJbWFnZSBzcmM9e2BodHRwczovL2kucHJhdmF0YXIuY2MvMTUwP3U9JHtsZWFkLmNoYXRJZH1gfSAvPlxuICAgICAgICAgIDxBdmF0YXJGYWxsYmFjaz57Z2V0SW5pdGlhbHMobGVhZC5jdXN0b21lck5hbWUsIGxlYWQucGhvbmUpfTwvQXZhdGFyRmFsbGJhY2s+XG4gICAgICAgIDwvQXZhdGFyPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1zZW1pYm9sZFwiPntkaXNwbGF5TmFtZX08L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kXCI+e2xlYWQucGhvbmV9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cImZsZXgtMSBwLTAgYmctbXV0ZWQvMjBcIj5cbiAgICAgICAgPFNjcm9sbEFyZWEgY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgc3BhY2UteS00XCI+XG4gICAgICAgICAgICB7aXNMb2FkaW5nICYmIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLTE2IHctMS8yXCIgLz59XG4gICAgICAgICAgICB7ZXJyb3IgJiYgPEVycm9yU3RhdGUgb25SZXRyeT17KCkgPT4ge319IG1lc3NhZ2U9XCJGYWlsZWQgdG8gbG9hZCBtZXNzYWdlcy5cIiAvPn1cbiAgICAgICAgICAgIHttZXNzYWdlcyAmJiBtZXNzYWdlcy5sZW5ndGggPT09IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxFbXB0eVN0YXRlIGljb249e01lc3NhZ2VTcXVhcmV9IHRpdGxlPVwiTm8gTWVzc2FnZXMgWWV0XCIgZGVzY3JpcHRpb249XCJTdGFydCB0aGUgY29udmVyc2F0aW9uIGJ5IHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2UuXCIgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7bWVzc2FnZXM/Lm1hcCgobXNnKSA9PiAoXG4gICAgICAgICAgICAgIDxNZXNzYWdlQnViYmxlIGtleT17bXNnLmlkfSBtZXNzYWdlPXttc2d9IC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXttZXNzYWdlc0VuZFJlZn0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9TY3JvbGxBcmVhPlxuICAgICAgPC9DYXJkQ29udGVudD5cbiAgICAgIDxDYXJkRm9vdGVyIGNsYXNzTmFtZT1cInAtMiBib3JkZXItdCBiZy1iYWNrZ3JvdW5kXCI+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTZW5kTWVzc2FnZX0gY2xhc3NOYW1lPVwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgPFRleHRhcmVhXG4gICAgICAgICAgICB2YWx1ZT17bWVzc2FnZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TWVzc2FnZShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlR5cGUgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXgtMSByZXNpemUtbm9uZSBib3JkZXItMCBmb2N1cy12aXNpYmxlOnJpbmctMCBmb2N1cy12aXNpYmxlOnJpbmctb2Zmc2V0LTBcIlxuICAgICAgICAgICAgcm93cz17MX1cbiAgICAgICAgICAgIGRpc2FibGVkPXtpc1NlbmRpbmd9XG4gICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBoYW5kbGVTZW5kTWVzc2FnZShlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxCdXR0b24gdHlwZT1cInN1Ym1pdFwiIHNpemU9XCJpY29uXCIgZGlzYWJsZWQ9e2lzU2VuZGluZyB8fCAhbWVzc2FnZS50cmltKCl9PlxuICAgICAgICAgICAgPFNlbmQgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICAgIDwvQ2FyZEZvb3Rlcj5cbiAgICA8L0NhcmQ+XG4gICk7XG59XG5cbmZ1bmN0aW9uIFBhZ2VTa2VsZXRvbigpIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgbGc6Z3JpZC1jb2xzLTQgZ2FwLTAgaC1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBib3JkZXItciBwLTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgICAge1suLi5BcnJheSg5KV0ubWFwKChfLCBpKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQgcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLTEyIHctMTIgcm91bmRlZC1mdWxsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTIgZmxleC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U2tlbGV0b24gY2xhc3NOYW1lPVwiaC00IHctMS8yXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLTQgdy0zLzRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMSBtZDpjb2wtc3Bhbi0yIGxnOmNvbC1zcGFuLTMgaGlkZGVuIG1kOmJsb2NrIHAtMlwiPlxuICAgICAgICAgICAgIDxTa2VsZXRvbiBjbGFzc05hbWU9XCJoLWZ1bGwgdy1mdWxsIHJvdW5kZWQtbGdcIiAvPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gT2Jyb2xhblBhZ2UoKSB7XG4gIGNvbnN0IGZpcmVzdG9yZSA9IHVzZUZpcmVzdG9yZSgpO1xuICBjb25zdCB7IHVzZXJQcm9maWxlLCBpc0xvYWRpbmc6IGlzUHJvZmlsZUxvYWRpbmcsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IHVzZVVzZXJQcm9maWxlKCk7XG4gIGNvbnN0IFtzZWxlY3RlZExlYWQsIHNldFNlbGVjdGVkTGVhZF0gPSBSZWFjdC51c2VTdGF0ZTxMZWFkIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZWFyY2hRdWVyeSwgc2V0U2VhcmNoUXVlcnldID0gUmVhY3QudXNlU3RhdGUoXCJcIik7XG5cbiAgY29uc3Qgd2hhdHNhcHBMZWFkc1F1ZXJ5ID0gdXNlTWVtb0ZpcmViYXNlKCgpID0+IHtcbiAgICBpZiAoIWZpcmVzdG9yZSB8fCAhdXNlclByb2ZpbGUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGNvbGwgPSBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgRklSRVNUT1JFX0NPTExFQ1RJT05TLmxlYWRzKTtcbiAgICAvLyBSRU1PVkVEOiBvcmRlckJ5KCdsYXN0TWVzc2FnZUF0JywgJ2Rlc2MnKVxuICAgIGNvbnN0IGJhc2VGaWx0ZXJzID0gW3doZXJlKCdzb3VyY2UnLCAnPT0nLCAnd2hhdHNhcHAnKV07XG5cbiAgICBpZiAodXNlclByb2ZpbGUucm9sZSA9PT0gJ1NVUEVSX0FETUlOJykge1xuICAgICAgcmV0dXJuIHF1ZXJ5KGNvbGwsIC4uLmJhc2VGaWx0ZXJzKTtcbiAgICB9IFxuICAgIGlmICh1c2VyUHJvZmlsZS5yb2xlID09PSAnSEVBRF9TQUxFUycgJiYgdXNlclByb2ZpbGUudGVhbUlkKSB7XG4gICAgICByZXR1cm4gcXVlcnkoY29sbCwgd2hlcmUoJ3RlYW1JZCcsICc9PScsIHVzZXJQcm9maWxlLnRlYW1JZCksIC4uLmJhc2VGaWx0ZXJzKTtcbiAgICB9IFxuICAgIGlmICh1c2VyUHJvZmlsZS5yb2xlID09PSAnU0FMRVMnKSB7XG4gICAgICByZXR1cm4gcXVlcnkoY29sbCwgd2hlcmUoJ293bmVyVWlkJywgJz09JywgdXNlclByb2ZpbGUuaWQpLCAuLi5iYXNlRmlsdGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHF1ZXJ5KGNvbGwsIHdoZXJlKCdvd25lclVpZCcsICc9PScsICd1c2VyLWhhcy1uby1wZXJtaXNzaW9uJykpO1xuICB9LCBbZmlyZXN0b3JlLCB1c2VyUHJvZmlsZV0pO1xuXG4gIGNvbnN0IHsgZGF0YTogbGVhZHMsIGlzTG9hZGluZzogaXNMb2FkaW5nTGVhZHMsIGVycm9yOiBsZWFkc0Vycm9yIH0gPSB1c2VDb2xsZWN0aW9uPExlYWQ+KHdoYXRzYXBwTGVhZHNRdWVyeSk7XG5cbiAgY29uc3QgaXNMb2FkaW5nID0gaXNQcm9maWxlTG9hZGluZyB8fCBpc0xvYWRpbmdMZWFkcztcbiAgY29uc3QgZXJyb3IgPSBwcm9maWxlRXJyb3IgfHwgbGVhZHNFcnJvcjtcblxuICBjb25zdCBoYW5kbGVSZXRyeSA9ICgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgXG4gIGNvbnN0IGZpbHRlcmVkTGVhZHMgPSBSZWFjdC51c2VNZW1vKCgpID0+IHtcbiAgICBpZiAoIWxlYWRzKSByZXR1cm4gW107XG4gICAgXG4gICAgLy8gQ2xpZW50LXNpZGUgc29ydGluZ1xuICAgIGNvbnN0IHNvcnRlZExlYWRzID0gWy4uLmxlYWRzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IHRpbWVBID0gYS5sYXN0TWVzc2FnZUF0Py50b01pbGxpcygpIHx8IGEuY3JlYXRlZEF0Py50b01pbGxpcygpIHx8IDA7XG4gICAgICAgIGNvbnN0IHRpbWVCID0gYi5sYXN0TWVzc2FnZUF0Py50b01pbGxpcygpIHx8IGIuY3JlYXRlZEF0Py50b01pbGxpcygpIHx8IDA7XG4gICAgICAgIHJldHVybiB0aW1lQiAtIHRpbWVBO1xuICAgIH0pO1xuXG4gICAgaWYgKCFzZWFyY2hRdWVyeSkgcmV0dXJuIHNvcnRlZExlYWRzO1xuXG4gICAgcmV0dXJuIHNvcnRlZExlYWRzLmZpbHRlcihsZWFkID0+IFxuICAgICAgICAobGVhZC5jdXN0b21lck5hbWUgJiYgbGVhZC5jdXN0b21lck5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpKSkgfHxcbiAgICAgICAgKGxlYWQucGhvbmUgJiYgbGVhZC5waG9uZS5pbmNsdWRlcyhzZWFyY2hRdWVyeSkpXG4gICAgKTtcbiAgfSwgW2xlYWRzLCBzZWFyY2hRdWVyeV0pO1xuICBcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBBdXRvbWF0aWNhbGx5IHNlbGVjdCB0aGUgZmlyc3QgbGVhZCB3aGVuIHRoZSBsaXN0IGlzIGxvYWRlZCBvciBmaWx0ZXJlZFxuICAgIGlmIChmaWx0ZXJlZExlYWRzLmxlbmd0aCA+IDAgJiYgIXNlbGVjdGVkTGVhZCkge1xuICAgICAgc2V0U2VsZWN0ZWRMZWFkKGZpbHRlcmVkTGVhZHNbMF0pO1xuICAgIH0gZWxzZSBpZiAoZmlsdGVyZWRMZWFkcy5sZW5ndGggPiAwICYmIHNlbGVjdGVkTGVhZCkge1xuICAgICAgLy8gSWYgYSBsZWFkIGlzIGFscmVhZHkgc2VsZWN0ZWQsIGNoZWNrIGlmIGl0IHN0aWxsIGV4aXN0cyBpbiB0aGUgZmlsdGVyZWQgbGlzdC5cbiAgICAgIC8vIElmIG5vdCwgc2VsZWN0IHRoZSBuZXcgZmlyc3QgbGVhZC4gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIGEgc2VhcmNoIHF1ZXJ5XG4gICAgICAvLyByZW1vdmVzIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgbGVhZCBmcm9tIHZpZXcuXG4gICAgICBjb25zdCBzZWxlY3RlZEV4aXN0cyA9IGZpbHRlcmVkTGVhZHMuc29tZShsZWFkID0+IGxlYWQuaWQgPT09IHNlbGVjdGVkTGVhZC5pZCk7XG4gICAgICBpZiAoIXNlbGVjdGVkRXhpc3RzKSB7XG4gICAgICAgIHNldFNlbGVjdGVkTGVhZChmaWx0ZXJlZExlYWRzWzBdKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGZpbHRlcmVkTGVhZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbGVhZHMsIGNsZWFyIHRoZSBzZWxlY3Rpb25cbiAgICAgIHNldFNlbGVjdGVkTGVhZChudWxsKTtcbiAgICB9XG4gIH0sIFtmaWx0ZXJlZExlYWRzLCBzZWxlY3RlZExlYWRdKTtcblxuXG4gIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XG4gICAgaWYgKGlzTG9hZGluZykgcmV0dXJuIDxQYWdlU2tlbGV0b24gLz47XG4gICAgaWYgKGVycm9yKSByZXR1cm4gPEVycm9yU3RhdGUgb25SZXRyeT17aGFuZGxlUmV0cnl9IG1lc3NhZ2U9XCJGYWlsZWQgdG8gbG9hZCBjaGF0IGxpc3QuXCIgLz47XG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGxnOmdyaWQtY29scy00IGgtZnVsbCBib3JkZXIgcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcbiAgICAgICAgICAgICAgICBcImNvbC1zcGFuLTEgYm9yZGVyLXIgZmxleC1jb2xcIixcbiAgICAgICAgICAgICAgICBzZWxlY3RlZExlYWQgPyBcImhpZGRlbiBtZDpmbGV4XCIgOiBcImZsZXhcIlxuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC0yIGJvcmRlci1iXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTZWFyY2ggY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0yLjUgdG9wLTIuNSBoLTQgdy00IHRleHQtbXV0ZWQtZm9yZWdyb3VuZFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJTZWFyY2ggY2hhdHMuLi5cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwbC04XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VhcmNoUXVlcnl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZWFyY2hRdWVyeShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgIDxTY3JvbGxBcmVhIGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgICAgICAgICB7ZmlsdGVyZWRMZWFkcy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgPEVtcHR5U3RhdGUgaWNvbj17TWVzc2FnZVNxdWFyZX0gdGl0bGU9XCJObyBXaGF0c0FwcCBDaGF0c1wiIGRlc2NyaXB0aW9uPVwiTGVhZHMgZnJvbSBXaGF0c0FwcCB3aWxsIGFwcGVhciBoZXJlLlwiIGNsYXNzTmFtZT1cImJvcmRlci0wIHNoYWRvdy1ub25lXCIvPlxuICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgc3BhY2UteS0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkTGVhZHMubWFwKChsZWFkKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDaGF0TGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bGVhZC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlYWQ9e2xlYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkPXtzZWxlY3RlZExlYWQ/LmlkID09PSBsZWFkLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TZWxlY3Q9eygpID0+IHNldFNlbGVjdGVkTGVhZChsZWFkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvU2Nyb2xsQXJlYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NuKFxuICAgICAgICAgICAgICBcIm1kOmNvbC1zcGFuLTIgbGc6Y29sLXNwYW4tMyBmbGV4LWNvbFwiLFxuICAgICAgICAgICAgICBzZWxlY3RlZExlYWQgPyBcImZsZXhcIiA6IFwiaGlkZGVuIG1kOmZsZXhcIlxuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICAgICA8Q2hhdFdpbmRvdyBsZWFkPXtzZWxlY3RlZExlYWR9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1bY2FsYygxMDB2aC01N3B4KV0gZmxleCBmbGV4LWNvbCBwLTQgc206cC02IGxnOnAtOFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYi00XCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LTN4bCBmb250LWJvbGQgdHJhY2tpbmctdGlnaHQgZm9udC1oZWFkbGluZVwiPkNoYXQ8L2gxPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkLWZvcmVncm91bmQgbXQtMiBmb250LXNlcmlmXCI+XG4gICAgICAgICAgTWFuYWdlIHlvdXIgV2hhdHNBcHAgY29udmVyc2F0aW9ucyB3aXRoIGxlYWRzLlxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICB7cmVuZGVyQ29udGVudCgpfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbiAgICAiXSwibmFtZXMiOlsiUmVhY3QiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJsaW1pdCIsInVzZUZpcmVzdG9yZSIsInVzZUNvbGxlY3Rpb24iLCJ1c2VNZW1vRmlyZWJhc2UiLCJGSVJFU1RPUkVfQ09MTEVDVElPTlMiLCJBdmF0YXIiLCJBdmF0YXJGYWxsYmFjayIsIkF2YXRhckltYWdlIiwiU2tlbGV0b24iLCJFcnJvclN0YXRlIiwiRW1wdHlTdGF0ZSIsIk1lc3NhZ2VTcXVhcmUiLCJTZW5kIiwiQ29ybmVyVXBMZWZ0IiwiU2VhcmNoIiwiU2Nyb2xsQXJlYSIsInVzZVVzZXJQcm9maWxlIiwiQ2FyZCIsIkNhcmRIZWFkZXIiLCJDYXJkQ29udGVudCIsIkNhcmRGb290ZXIiLCJUZXh0YXJlYSIsIkJ1dHRvbiIsIklucHV0IiwidXNlVG9hc3QiLCJmb3JtYXQiLCJpc1RvZGF5IiwiaXNZZXN0ZXJkYXkiLCJjbiIsInVzZVVzZXIiLCJnZXRJbml0aWFscyIsIm5hbWUiLCJwaG9uZSIsInRhcmdldE5hbWUiLCJ0cmltIiwicGFydHMiLCJzcGxpdCIsImZpbHRlciIsIkJvb2xlYW4iLCJsZW5ndGgiLCJwb3AiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0cmluZyIsImZvcm1hdENoYXRUaW1lc3RhbXAiLCJ0cyIsImRhdGUiLCJ0b0RhdGUiLCJDaGF0TGlzdEl0ZW0iLCJsZWFkIiwiaXNTZWxlY3RlZCIsIm9uU2VsZWN0IiwiZGlzcGxheU5hbWUiLCJjdXN0b21lck5hbWUiLCJkaXYiLCJjbGFzc05hbWUiLCJvbkNsaWNrIiwic3JjIiwiY2hhdElkIiwibGFzdE1lc3NhZ2VBdCIsInAiLCJsYXN0TWVzc2FnZVByZXZpZXciLCJNZXNzYWdlQnViYmxlIiwibWVzc2FnZSIsImlzT3V0Ym91bmQiLCJkaXJlY3Rpb24iLCJ0ZXh0IiwidGltZXN0YW1wIiwiQ2hhdFdpbmRvdyIsImZpcmVzdG9yZSIsInRvYXN0IiwidXNlciIsImF1dGhVc2VyIiwic2V0TWVzc2FnZSIsInVzZVN0YXRlIiwiaXNTZW5kaW5nIiwic2V0SXNTZW5kaW5nIiwibWVzc2FnZXNFbmRSZWYiLCJ1c2VSZWYiLCJtZXNzYWdlc1F1ZXJ5IiwibGVhZHMiLCJpZCIsImRhdGEiLCJtZXNzYWdlcyIsImlzTG9hZGluZyIsImVycm9yIiwic2Nyb2xsVG9Cb3R0b20iLCJjdXJyZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsInVzZUVmZmVjdCIsImhhbmRsZVNlbmRNZXNzYWdlIiwiZSIsInByZXZlbnREZWZhdWx0IiwidG9rZW4iLCJnZXRJZFRva2VuIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxlYWRJZCIsInJlc3VsdCIsImpzb24iLCJvayIsIkVycm9yIiwidmFyaWFudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJvblJldHJ5IiwiaWNvbiIsIm1hcCIsIm1zZyIsInJlZiIsImZvcm0iLCJvblN1Ym1pdCIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsInJvd3MiLCJkaXNhYmxlZCIsIm9uS2V5RG93biIsImtleSIsInNoaWZ0S2V5IiwidHlwZSIsInNpemUiLCJQYWdlU2tlbGV0b24iLCJBcnJheSIsIl8iLCJpIiwiT2Jyb2xhblBhZ2UiLCJ1c2VyUHJvZmlsZSIsImlzUHJvZmlsZUxvYWRpbmciLCJwcm9maWxlRXJyb3IiLCJzZWxlY3RlZExlYWQiLCJzZXRTZWxlY3RlZExlYWQiLCJzZWFyY2hRdWVyeSIsInNldFNlYXJjaFF1ZXJ5Iiwid2hhdHNhcHBMZWFkc1F1ZXJ5IiwiY29sbCIsImJhc2VGaWx0ZXJzIiwicm9sZSIsInRlYW1JZCIsImlzTG9hZGluZ0xlYWRzIiwibGVhZHNFcnJvciIsImhhbmRsZVJldHJ5Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJmaWx0ZXJlZExlYWRzIiwidXNlTWVtbyIsInNvcnRlZExlYWRzIiwic29ydCIsImEiLCJiIiwidGltZUEiLCJ0b01pbGxpcyIsImNyZWF0ZWRBdCIsInRpbWVCIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInNlbGVjdGVkRXhpc3RzIiwic29tZSIsInJlbmRlckNvbnRlbnQiLCJoMSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/obrolan/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./src/lib/firestore/collections.ts":
/*!******************************************!*\
  !*** ./src/lib/firestore/collections.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FIRESTORE_COLLECTIONS: () => (/* binding */ FIRESTORE_COLLECTIONS)\n/* harmony export */ });\nconst FIRESTORE_COLLECTIONS = {\n    teams: 'teams',\n    users: 'users',\n    contacts: 'contacts',\n    leads: 'leads',\n    deals: 'deals',\n    activities: 'activities',\n    settings: 'settings',\n    integrationSettings: 'integrations/settings',\n    auditLogs: 'audit_logs'\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmlyZXN0b3JlL2NvbGxlY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSx3QkFBd0I7SUFDbkNDLE9BQU87SUFDUEMsT0FBTztJQUNQQyxVQUFVO0lBQ1ZDLE9BQU87SUFDUEMsT0FBTztJQUNQQyxZQUFZO0lBQ1pDLFVBQVU7SUFDVkMscUJBQXFCO0lBQ3JCQyxXQUFXO0FBQ2IsRUFBRSIsInNvdXJjZXMiOlsiL2hvbWUvdXNlci9zdHVkaW8vc3JjL2xpYi9maXJlc3RvcmUvY29sbGVjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IEZJUkVTVE9SRV9DT0xMRUNUSU9OUyA9IHtcbiAgdGVhbXM6ICd0ZWFtcycsXG4gIHVzZXJzOiAndXNlcnMnLFxuICBjb250YWN0czogJ2NvbnRhY3RzJyxcbiAgbGVhZHM6ICdsZWFkcycsXG4gIGRlYWxzOiAnZGVhbHMnLFxuICBhY3Rpdml0aWVzOiAnYWN0aXZpdGllcycsXG4gIHNldHRpbmdzOiAnc2V0dGluZ3MnLFxuICBpbnRlZ3JhdGlvblNldHRpbmdzOiAnaW50ZWdyYXRpb25zL3NldHRpbmdzJyxcbiAgYXVkaXRMb2dzOiAnYXVkaXRfbG9ncycsXG59O1xuXG4gICAgIl0sIm5hbWVzIjpbIkZJUkVTVE9SRV9DT0xMRUNUSU9OUyIsInRlYW1zIiwidXNlcnMiLCJjb250YWN0cyIsImxlYWRzIiwiZGVhbHMiLCJhY3Rpdml0aWVzIiwic2V0dGluZ3MiLCJpbnRlZ3JhdGlvblNldHRpbmdzIiwiYXVkaXRMb2dzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/firestore/collections.ts\n"));

/***/ })

});